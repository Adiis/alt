<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Alt Instances</title>
  <meta name="description" content="A library for managing data within JavaScript applications. Alt is a pure flux implementation that is small, terse, well tested, extremely flexible, and forward thinking.
">

  <link rel="canonical" href="http://alt.js.org/docs/altInstances/">
  <link rel="alternate" type="application/rss+xml" title="Alt" href="http://alt.js.org/feed.xml" />

  <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">

  <link type="text/css" rel="stylesheet" href="/assets/bootstrap-navbar.css" />
  <link type="text/css" rel="stylesheet" href="/assets/lotus.min.css" />
  <link type="text/css" rel="stylesheet" href="/assets/prism.min.css" />
  <link type="text/css" rel="stylesheet" href="/assets/styles.css" />
</head>


  <body>

    <nav class="navbar navbar-default sp-horiz-lg">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a class="navbar-brand" href="/"><img src="/assets/alt.png" alt="Alt" width="40" /></a>
    </div>

    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div id="alt-search-app"></div>
      <ul class="nav navbar-nav navbar-right">
        <li>
          <a href="/guide/">Getting Started</a>
        </li>
        <li class="dropdown">
          <a href='#' class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">API Documentation <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li>
              <a href="/docs/">Alt</a>
            </li>
            
            <li>
              <a href="/docs/createActions">Creating Actions</a>
            </li>
            
            <li>
              <a href="/docs/actions">Actions</a>
            </li>
            
            <li>
              <a href="/docs/createStore">Creating Stores</a>
            </li>
            
            <li>
              <a href="/docs/stores">Stores</a>
            </li>
            
            <li>
              <a href="/docs/async">Handling Async</a>
            </li>
            
            <li>
              <a href="/docs/lifecycleListeners">Lifecycle Listeners</a>
            </li>
            
            <li>
              <a href="/docs/bootstrap">Bootstrap</a>
            </li>
            
            <li>
              <a href="/docs/takeSnapshot">Take Snapshot</a>
            </li>
            
            <li>
              <a href="/docs/flush">Flush</a>
            </li>
            
            <li>
              <a href="/docs/recycle">Recycle</a>
            </li>
            
            <li>
              <a href="/docs/rollback">Rollback</a>
            </li>
            
            <li>
              <a href="/docs/altInstances">Alt Instances</a>
            </li>
            
            <li>
              <a href="/docs/components/altContainer">AltContainer</a>
            </li>
            
          </ul>
        </li>
        <li>
          <a href="/blog/">Blog</a>
        </li>
        <li>
          <a href="https://gitter.im/goatslacker/alt">Support</a>
        </li>
        <li>
          <a href="https://github.com/goatslacker/alt">GitHub</a>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>


    <div class="main sp-vert-md sp-horiz-lg">
      <div class="row">
        <div class="col c2">
          <ul class="sidenav">
  
  <li>
    <a href="/docs/createActions">Creating Actions</a>
  </li>
  
  <li>
    <a href="/docs/actions">Actions</a>
  </li>
  
  <li>
    <a href="/docs/createStore">Creating Stores</a>
  </li>
  
  <li>
    <a href="/docs/stores">Stores</a>
  </li>
  
  <li>
    <a href="/docs/async">Handling Async</a>
  </li>
  
  <li>
    <a href="/docs/lifecycleListeners">Lifecycle Listeners</a>
  </li>
  
  <li>
    <a href="/docs/bootstrap">Bootstrap</a>
  </li>
  
  <li>
    <a href="/docs/takeSnapshot">Take Snapshot</a>
  </li>
  
  <li>
    <a href="/docs/flush">Flush</a>
  </li>
  
  <li>
    <a href="/docs/recycle">Recycle</a>
  </li>
  
  <li>
    <a href="/docs/rollback">Rollback</a>
  </li>
  
  <li>
    <a href="/docs/altInstances">Alt Instances</a>
  </li>
  
  <li>
    <a href="/docs/components/altContainer">AltContainer</a>
  </li>
  
</ul>

        </div>
        <div class="col c10">
          <div class="sp-horiz-md">
            <h1 id="creating-instances-of-your-flux">Creating instances of your Flux</h1>

<p>If using a singleton is scary to you, or if you believe dependency injection is the way to go then this is the feature for you. You don’t have to settle for traditional flux and its singleton stores. You can create separate instances of the Alt universe and then inject these into your view via dependency injection or if you’re using React, contexts. With this approach you get isomorphism for free, without having to worry about flushing your stores, since each request will generate its own instance.</p>

<p>Using instances of alt is fairly straightforward.</p>

<pre><code class="language-js">class MyAlt extends Alt {
  constructor(config = {}) {
    super(config);

    this.addActions('myActions', ActionCreators);
    this.addStore('storeName', Store);
  }
}

const flux = new MyAlt();
</code></pre>

<p>You can set your entire app context by wrapping your root component with <code>withAltContext</code>.</p>

<p>As a decorator:</p>

<pre><code class="language-js">import withAltContext from 'alt/utils/withAltContext'

@withAltContext(alt)
export default class App extends React.Component {
  render() {
    return &lt;div&gt;{this.context.flux}&lt;/div&gt;
  }
}
</code></pre>

<p>As a function:</p>

<pre><code class="language-js">import withAltContext from 'alt/utils/withAltContext'

export default withAltContext(alt)(App);
</code></pre>

<h1 id="altclass">AltClass</h1>

<h2 id="altclassconstructor">AltClass#constructor</h2>

<blockquote>
  <p>constructor(config: object) : Alt</p>
</blockquote>

<h2 id="altclassaddactions">AltClass#addActions</h2>

<blockquote>
  <p>addActions(actionsName: string, actions: <a href="/docs/createActions">ActionsClass</a>): undefined</p>
</blockquote>

<p>Creates the actions for this instance.</p>

<h2 id="altclassaddstore">AltClass#addStore</h2>

<blockquote>
  <p>addStore(name: string, store: <a href="/docs/createStore">StoreModel</a>, saveStore: boolean): undefined</p>
</blockquote>

<p>Creates the store for this instance.</p>

<h2 id="altclassgetactions">AltClass#getActions</h2>

<blockquote>
  <p>getActions(): <a href="/docs/actions">Actions</a></p>
</blockquote>

<p>Retrieves the created actions. This becomes useful when you need to bind the actions in the store.</p>

<pre><code class="language-js">class MyStore {
  constructor(alt) {
    this.bindActions(this.alt.getActions('myActions'));
  }
}
</code></pre>

<h2 id="altclassgetstore">AltClass#getStore</h2>

<blockquote>
  <p>getStore(): <a href="/docs/stores">AltStore</a></p>
</blockquote>

<p>Retrieves the store instance that was created.</p>

<pre><code class="language-js">const state = alt.getStore('myStore').getState();
</code></pre>

<h1 id="integrating-with-react">Integrating with React</h1>

<p>You have two options on passing your alt instance through to your React components: manually through props, or using context.</p>

<p>We won’t go over manually through props except for this one small code sample:</p>

<pre><code class="language-js">const flux = new Flux()

class MyApplicationComponent extends React.Component {
  render() {
    return (
      &lt;div&gt;
        &lt;MySuperCoolComponent flux={this.props.flux} /&gt;
      &lt;/div&gt;
    )
  }
}


&lt;MyApplicationComponent flux={flux} /&gt;
</code></pre>

<p>Now, using context, which is a more common approach. There’s a <a href="../src/utils/withAltContext">util you can use</a> which will automatically create the context for you and then make it available for every immediate child of AltContainer.</p>

<pre><code class="language-js">const flux = new Flux()

class MyApplicationComponent extends React.Component {
  render() {
    // MySuperCoolComponent would automatically get this.props.flux
    return (
      &lt;div&gt;
        &lt;AltContainer&gt;
          &lt;MySuperCoolComponent /&gt;
        &lt;/AltContainer&gt;
      &lt;/div&gt;
    )
  }
}

const App = withAltContext(flux, MyApplicationComponent)
&lt;App /&gt;
</code></pre>

<p>Now you’re setup to do things with each instance of Alt:</p>

<pre><code class="language-js">class MySuperCoolComponent extends React.Component {
  componentDidMount() {
    this.props.flux.actions.CoolActions.goFetchData()
  }

  render() {
    return (
      &lt;div&gt;{this.props.flux.stores.CoolStore.getMyCoolName()}&lt;/div&gt;
    )
  }
}
</code></pre>

<p>You can read more about <a href="/docs/components/altContainer">AltContainer here</a>.</p>

          </div>
        </div>
      </div>
    </div>

    <script type="application/javascript" src="http://alt.js.org/assets/search.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/prism/0.0.1/prism.min.js"></script>
<script type="text/javascript">
  // Alias for javascript so syntax highlighting works fine
  Prism.languages.js = Prism.languages.javascript;
</script>
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.2.min.js" ></script>
<script type="text/javascript" src="/assets/bootstrap-navbar.min.js"></script>
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'goatslacker/alt'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>


  </body>

</html>
