<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Lifecycle Listeners</title>
  <meta name="description" content="A library for managing data within JavaScript applications. Alt is a pure flux implementation that is small, terse, well tested, extremely flexible, and forward thinking.
">

  <link rel="canonical" href="http://alt.js.org/docs/lifecycleListeners/">
  <link rel="alternate" type="application/rss+xml" title="Alt" href="http://alt.js.org/feed.xml" />

  <link type="text/css" rel="stylesheet" href="/assets/bootstrap-navbar.css" />
  <link type="text/css" rel="stylesheet" href="/assets/lotus.min.css" />
  <link type="text/css" rel="stylesheet" href="/assets/prism.min.css" />
  <link type="text/css" rel="stylesheet" href="/assets/styles.css" />
</head>


  <body>

    <nav class="navbar navbar-default sp-horiz-lg">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a class="navbar-brand" href="/"><img src="/assets/alt.png" alt="Alt" width="40" /></a>
      <div id="alt-search-app"></div>
    </div>

    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        <li>
          <a href="/guide/">Getting Started</a>
        </li>
        <li class="dropdown">
          <a href='#' class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">API Documentation <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li>
              <a href="/docs/">Alt</a>
            </li>
            
            <li>
              <a href="/docs/createActions">Creating Actions</a>
            </li>
            
            <li>
              <a href="/docs/actions">Actions</a>
            </li>
            
            <li>
              <a href="/docs/createStore">Creating Stores</a>
            </li>
            
            <li>
              <a href="/docs/stores">Stores</a>
            </li>
            
            <li>
              <a href="/docs/lifecycleListeners">Lifecycle Listeners</a>
            </li>
            
            <li>
              <a href="/docs/bootstrap">Bootstrap</a>
            </li>
            
            <li>
              <a href="/docs/takeSnapshot">Take Snapshot</a>
            </li>
            
            <li>
              <a href="/docs/flush">Flush</a>
            </li>
            
            <li>
              <a href="/docs/recycle">Recycle</a>
            </li>
            
            <li>
              <a href="/docs/rollback">Rollback</a>
            </li>
            
            <li>
              <a href="/docs/altInstances">Alt Instances</a>
            </li>
            
            <li>
              <a href="/docs/components/altContainer">AltContainer</a>
            </li>
            
          </ul>
        </li>
        <li>
          <a href="/blog/">Blog</a>
        </li>
        <li>
          <a href="https://gitter.im/goatslacker/alt">Support</a>
        </li>
        <li>
          <a href="https://github.com/goatslacker/alt">GitHub</a>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>


    <div class="main sp-vert-md sp-horiz-lg">
      <div class="row">
        <div class="col c2">
          <ul class="sidenav">
  
  <li>
    <a href="/docs/createActions">Creating Actions</a>
  </li>
  
  <li>
    <a href="/docs/actions">Actions</a>
  </li>
  
  <li>
    <a href="/docs/createStore">Creating Stores</a>
  </li>
  
  <li>
    <a href="/docs/stores">Stores</a>
  </li>
  
  <li>
    <a href="/docs/lifecycleListeners">Lifecycle Listeners</a>
  </li>
  
  <li>
    <a href="/docs/bootstrap">Bootstrap</a>
  </li>
  
  <li>
    <a href="/docs/takeSnapshot">Take Snapshot</a>
  </li>
  
  <li>
    <a href="/docs/flush">Flush</a>
  </li>
  
  <li>
    <a href="/docs/recycle">Recycle</a>
  </li>
  
  <li>
    <a href="/docs/rollback">Rollback</a>
  </li>
  
  <li>
    <a href="/docs/altInstances">Alt Instances</a>
  </li>
  
  <li>
    <a href="/docs/components/altContainer">AltContainer</a>
  </li>
  
</ul>

        </div>
        <div class="col c10">
          <div class="sp-horiz-md">
            <h1 id="lifecycle-listener-methods">Lifecycle Listener Methods</h1>

<p>When bootstrapping, snapshotting, or recycling there are special methods you can assign to your store to ensure any bookkeeping that needs to be done. You would place these in your store’s constructor.</p>

<h2 id="bootstrap">Bootstrap</h2>

<p><code>bootstrap</code> is called after the store has been bootstrapped. Here you can add some logic to take your bootstrapped data and manipulate it.</p>

<pre><code class="language-js">class Store {
  constructor() {
    this.on('bootstrap', () =&gt; {
      // do something here
    });
  }
}
</code></pre>

<h2 id="snapshot">Snapshot</h2>

<p><code>snapshot</code> is called before the store’s state is serialized. Here you can perform any final tasks you need to before the state is saved.</p>

<pre><code class="language-js">class Store {
  constructor() {
    this.on('snapshot', () =&gt; {
      // do something here
    });
  }
}
</code></pre>

<h2 id="init">Init</h2>

<p><code>init</code> is called when the store is initialized as well as whenever a store is recycled.</p>

<pre><code class="language-js">class Store {
  constructor() {
    this.on('init', () =&gt; {
      // do something here
    }):
  }
}
</code></pre>

<h2 id="rollback">Rollback</h2>

<p><code>rollback</code> is called whenever all the stores are rolled back.</p>

<pre><code class="language-js">class Store {
  constructor() {
    this.on('rollback', () =&gt; {
      // do something here
    });
  }
}
</code></pre>

<h2 id="error">Error</h2>

<p><code>error</code> is called whenever an error occurs in your store during a dispatch. You can use this listener to catch errors and perform any cleanup tasks.</p>

<pre><code class="language-js">class Store {
  constructor() {
    this.on('error', (err, payload, currentState) =&gt; {
      if (payload.action === MyActions.fire) {
        logError(err, payload.data);
      }
    });

    this.bindListeners({
      handleFire: MyActions.fire
    });
  }

  handleFire() {
    throw new Error('Something is broken');
  }
}
</code></pre>

<h2 id="beforeeach">beforeEach</h2>

<blockquote>
  <p>(payload: object, state: object): undefined</p>
</blockquote>

<p>This method gets called, if defined, before the payload hits the action. You can use this method to <code>waitFor</code> other stores, save previous state, or perform any bookeeping. The state passed in to <code>beforeEach</code> is the current state pre-action.</p>

<p><code>payload</code> is an object which contains the keys <code>action</code> for the action name and <code>data</code> for the data that you’re dispatching; <code>state</code> is the current store’s state.</p>

<h2 id="aftereach">afterEach</h2>

<blockquote>
  <p>(payload: object, state: object): undefined</p>
</blockquote>

<p>This method gets called, if defined, after the payload hits the action and the store emits a change. You can use this method for bookeeping and as a companion to <code>beforeEach</code>. The state passed in to <code>afterEach</code> is the current state post-action.</p>

<h2 id="unlisten">unlisten</h2>

<blockquote>
  <p>(): undefined</p>
</blockquote>

<p><code>unlisten</code> is called when you call unlisten on your store subscription. You can use this method to perform any teardown type tasks.</p>

          </div>
        </div>
      </div>
    </div>

    <script type="application/javascript" src="/assets/search.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/prism/0.0.1/prism.min.js"></script>
<script type="text/javascript">
  // Alias for javascript so syntax highlighting works fine
  Prism.languages.js = Prism.languages.javascript;
</script>
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.2.min.js" ></script>
<script type="text/javascript" src="/assets/bootstrap-navbar.min.js"></script>


  </body>

</html>
